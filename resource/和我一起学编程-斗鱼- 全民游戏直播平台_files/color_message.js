$(function(){var b=$("#chart_content").css("color");var a=true;$("#js_colours .color_button").click(function(c){if(a){if($("#js_colours .colours_box").is(":hidden")){$("#js_colours .colours_box").fadeIn();$("#face_list").hide()}else{$("#js_colours .colours_box").fadeOut()}}else{$(this).html("普通弹幕").removeClass("color_button_open").css("color","#6d6d6d");$("#chart_content").css("color","#333").focus();b=$("#chart_content").css("color");barrage_color=0;a=true}c.stopPropagation()});$(document).click(function(){$("#js_colours .colours_box").fadeOut()});$.each($("#js_colours .colours_cont span"),function(d,e){var f=$(this).css("backgroundColor");$(this).mouseenter(function(){$(this).css("border-color",f)});$(this).mouseleave(function(){$(this).css("border-color","#fff")});$(this).click(function(){$("#chart_content").css("color",f).focus();$("#js_colours .colours_box").fadeOut();$("#js_colours .color_button").html("彩色弹幕").addClass("color_button_open").css("color",f);a=false;barrage_color=d+1;b=f})})});function rgbstrtonum(c){var b=c.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);var a=parseInt(b[1])+(b[2])*256+(b[3])*65536;return a};